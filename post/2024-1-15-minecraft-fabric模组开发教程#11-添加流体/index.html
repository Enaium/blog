<!doctype html><html><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Minecraft Fabric模组开发教程#11 添加流体</title>
<link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/styles.css></head><body class="d-flex flex-column justify-content-between min-vh-100"><nav class="navbar navbar-expand-lg bg-light"><div class=container-fluid><a class=navbar-brand href=/><img src=/assets/github.svg alt=Logo width=30 height=24 class="d-inline-block align-text-top">
Enaium的博客
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link aria-current=page href=https://blog.enaium.cn/contact/>联系</a></li><li class=nav-item><a class=nav-link aria-current=page href=https://blog.enaium.cn/about/>关于</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" data-bs-toggle=dropdown href=# role=button aria-expanded=false><img alt=Logo width=30 height=24 src=/assets/language.svg></a><ul class=dropdown-menu></ul></li></ul></div></div></nav><div style=flex:1><div class=container><div class=card><div class=card-header>Minecraft Fabric模组开发教程#11 添加流体</div><div class=card-body><div class=card-text><h2 id=前言>前言</h2><p>本教程将会教你如何添加流体，什么是流体呢？就是像水、熔岩这样的东西，我们将会添加一种新的流体。</p><h2 id=创建流体>创建流体</h2><p>在原版中流体都继承了<code>net.minecraft.fluid.FlowableFluid</code>，所以我们也继承它。</p><p>首先创建一个抽象类<code>AwesomeFluid</code>，然后继承<code>FlowableFluid</code>，然后实现一些方法。</p><ul><li><code>matchesType</code>：判断流体是否是我们的流体</li><li><code>isInfinite</code>：是否是无限流体，就是像水一样，无限多</li><li><code>beforeBreakingBlock</code>：当流体破坏方块时，会调用这个方法，我们在这里把方块掉落，比如火把被水破坏时，会掉落火把</li><li><code>canBeReplacedWith</code>：是否可以被替换</li><li><code>getFlowSpeed</code>：流体流动速度</li><li><code>getLevelDecreasePerBlock</code>：水返回 1，熔岩在主世界时返回 2 并且在下界时返回 1</li><li><code>getTickRate</code>：水返回 5，熔岩在主世界时返回 30 并且在下界时返回 10</li><li><code>getBlastResistance</code>：爆炸抗性，水和熔岩都是 100</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AwesomeFluid</span> <span style=color:#66d9ef>extends</span> FlowableFluid {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>matchesType</span>(Fluid fluid) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> fluid <span style=color:#f92672>==</span> getStill() <span style=color:#f92672>||</span> fluid <span style=color:#f92672>==</span> getFlowing();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>isInfinite</span>(World world) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>beforeBreakingBlock</span>(WorldAccess world, BlockPos pos, BlockState state) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>final</span> BlockEntity blockEntity <span style=color:#f92672>=</span> state.<span style=color:#a6e22e>hasBlockEntity</span>() <span style=color:#f92672>?</span> world.<span style=color:#a6e22e>getBlockEntity</span>(pos) : <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>        Block.<span style=color:#a6e22e>dropStacks</span>(state, world, pos, blockEntity);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>canBeReplacedWith</span>(FluidState state, BlockView world, BlockPos pos, Fluid fluid, Direction direction) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getFlowSpeed</span>(WorldView world) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> 4;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getLevelDecreasePerBlock</span>(WorldView world) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> 1;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getTickRate</span>(WorldView world) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> 5;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>getBlastResistance</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> 100;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>之后我们创建一个<code>EndWaterFluid</code>枚举类，继承<code>AwesomeFluid</code>，然后实现一些方法，这里先返回<code>null</code>，我们之后会修改。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>EndWaterFluid</span> <span style=color:#66d9ef>extends</span> AwesomeFluid {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Fluid <span style=color:#a6e22e>getStill</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Fluid <span style=color:#a6e22e>getFlowing</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Item <span style=color:#a6e22e>getBucketItem</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> BlockState <span style=color:#a6e22e>toBlockState</span>(FluidState state) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>接着我们在<code>EndWaterFluid</code>类中创建一个<code>Flowing</code>和<code>Still</code>类，继承<code>EndWaterFluid</code>，然后实现一些方法。</p><ul><li><code>getStill</code>：是否是静止流体</li><li><code>getLevel</code>：流体的等级</li><li><code>appendProperties</code>：添加属性</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Flowing</span> <span style=color:#66d9ef>extends</span> EndWaterFluid {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>isStill</span>(FluidState state) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getLevel</span>(FluidState state) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> state.<span style=color:#a6e22e>get</span>(LEVEL);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>appendProperties</span>(StateManager.<span style=color:#a6e22e>Builder</span><span style=color:#f92672>&lt;</span>Fluid, FluidState<span style=color:#f92672>&gt;</span> builder) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span>.<span style=color:#a6e22e>appendProperties</span>(builder);
</span></span><span style=display:flex><span>        builder.<span style=color:#a6e22e>add</span>(LEVEL);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li><code>getStill</code>：是否是静止流体</li><li><code>getLevel</code>：流体的等级</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Still</span> <span style=color:#66d9ef>extends</span> EndWaterFluid {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>isStill</span>(FluidState state) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getLevel</span>(FluidState state) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> 8;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=注册流体>注册流体</h2><p>分别注册静止流体和流动流体，然后注册流体桶，最后注册流体方块，这里我们使用<code>FabricBlockSettings.copy</code>复制水的属性。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> FlowableFluid STILL_END_WATER <span style=color:#f92672>=</span> Registry.<span style=color:#a6e22e>register</span>(Registries.<span style=color:#a6e22e>FLUID</span>, <span style=color:#66d9ef>new</span> Identifier(<span style=color:#e6db74>&#34;awesome&#34;</span>, <span style=color:#e6db74>&#34;end_water&#34;</span>), <span style=color:#66d9ef>new</span> EndWaterFluid.<span style=color:#a6e22e>Still</span>());
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> FlowableFluid FLOWING_END_WATER <span style=color:#f92672>=</span> Registry.<span style=color:#a6e22e>register</span>(Registries.<span style=color:#a6e22e>FLUID</span>, <span style=color:#66d9ef>new</span> Identifier(<span style=color:#e6db74>&#34;awesome&#34;</span>, <span style=color:#e6db74>&#34;flowing_end_water&#34;</span>), <span style=color:#66d9ef>new</span> EndWaterFluid.<span style=color:#a6e22e>Flowing</span>());
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> Item END_WATER_BUCKET <span style=color:#f92672>=</span> Registry.<span style=color:#a6e22e>register</span>(Registries.<span style=color:#a6e22e>ITEM</span>, <span style=color:#66d9ef>new</span> Identifier(<span style=color:#e6db74>&#34;awesome&#34;</span>, <span style=color:#e6db74>&#34;end_water_bucket&#34;</span>), <span style=color:#66d9ef>new</span> BucketItem(STILL_END_WATER, <span style=color:#66d9ef>new</span> FabricItemSettings().<span style=color:#a6e22e>recipeRemainder</span>(Items.<span style=color:#a6e22e>BUCKET</span>).<span style=color:#a6e22e>maxCount</span>(1)));
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> Block END_WATER <span style=color:#f92672>=</span> Registry.<span style=color:#a6e22e>register</span>(Registries.<span style=color:#a6e22e>BLOCK</span>, <span style=color:#66d9ef>new</span> Identifier(<span style=color:#e6db74>&#34;awesome&#34;</span>, <span style=color:#e6db74>&#34;end_water&#34;</span>), <span style=color:#66d9ef>new</span> FluidBlock(STILL_END_WATER, FabricBlockSettings.<span style=color:#a6e22e>copy</span>(Blocks.<span style=color:#a6e22e>WATER</span>)));
</span></span></code></pre></div><p>最后补全<code>EndWaterFluid</code>类。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>EndWaterFluid</span> <span style=color:#66d9ef>extends</span> AwesomeFluid {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Fluid <span style=color:#a6e22e>getStill</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ExampleMod.<span style=color:#a6e22e>STILL_END_WATER</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Fluid <span style=color:#a6e22e>getFlowing</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ExampleMod.<span style=color:#a6e22e>FLOWING_END_WATER</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Item <span style=color:#a6e22e>getBucketItem</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ExampleMod.<span style=color:#a6e22e>END_WATER_BUCKET</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> BlockState <span style=color:#a6e22e>toBlockState</span>(FluidState state) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ExampleMod.<span style=color:#a6e22e>END_WATER</span>.<span style=color:#a6e22e>getDefaultState</span>().<span style=color:#a6e22e>with</span>(FluidBlock.<span style=color:#a6e22e>LEVEL</span>, WaterFluid.<span style=color:#a6e22e>getBlockStateLevel</span>(state));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=渲染设置>渲染设置</h2><p>在<code>onInitialize</code>设置流体渲染。</p><p>静止流体和流动流体的纹理都是<code>minecraft:block/water_still</code>，<code>minecraft:block/water_flow</code>，颜色是<code>0x730D95</code>。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>FluidRenderHandlerRegistry.<span style=color:#a6e22e>INSTANCE</span>.<span style=color:#a6e22e>register</span>(STILL_END_WATER, FLOWING_END_WATER, <span style=color:#66d9ef>new</span> SimpleFluidRenderHandler(
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>new</span> Identifier(<span style=color:#e6db74>&#34;minecraft:block/water_still&#34;</span>),
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>new</span> Identifier(<span style=color:#e6db74>&#34;minecraft:block/water_flow&#34;</span>),
</span></span><span style=display:flex><span>            0x730D95
</span></span><span style=display:flex><span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>BlockRenderLayerMap.<span style=color:#a6e22e>INSTANCE</span>.<span style=color:#a6e22e>putFluids</span>(RenderLayer.<span style=color:#a6e22e>getTranslucent</span>(), STILL_END_WATER, FLOWING_END_WATER);
</span></span></code></pre></div><h2 id=流体桶纹理>流体桶纹理</h2><p><img src=/assets/fabric2024/end_water_bucket.png alt=end_water_bucket></p><h2 id=流体生成>流体生成</h2><p>和矿物生成差不多，都需要在<code>configured_feature</code>和<code>placed_feature</code>中创建配置。</p><p>我们找到原版游戏中的<code>data/minecraft/worldgen/configured_feature/spring_water.json</code>和<code>data/minecraft/worldgen/placed_feature/spring_water.json</code>，然后将其修改为我们的配置。</p><p>首先在<code>configured_feature</code>中创建，<code>end_water.json</code>。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;minecraft:spring_feature&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;config&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;hole_count&#34;</span>: <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;requires_block_below&#34;</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;rock_count&#34;</span>: <span style=color:#ae81ff>4</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;state&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Name&#34;</span>: <span style=color:#e6db74>&#34;awesome:end_water&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;Properties&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;falling&#34;</span>: <span style=color:#e6db74>&#34;true&#34;</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;valid_blocks&#34;</span>: [
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;minecraft:stone&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;minecraft:granite&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;minecraft:diorite&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;minecraft:andesite&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;minecraft:deepslate&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;minecraft:tuff&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;minecraft:calcite&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;minecraft:dirt&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;minecraft:snow_block&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;minecraft:powder_snow&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;minecraft:packed_ice&#34;</span>
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>之后在<code>placed_feature</code>中创建，<code>end_water.json</code>。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;feature&#34;</span>: <span style=color:#e6db74>&#34;awesome:end_water&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;placement&#34;</span>: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;minecraft:count&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;count&#34;</span>: <span style=color:#ae81ff>25</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;minecraft:in_square&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;minecraft:height_range&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;height&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;minecraft:uniform&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;max_inclusive&#34;</span>: {
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;absolute&#34;</span>: <span style=color:#ae81ff>192</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;min_inclusive&#34;</span>: {
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;above_bottom&#34;</span>: <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;minecraft:biome&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>最后注册<code>PlacedFeature</code>。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> RegistryKey<span style=color:#f92672>&lt;</span>PlacedFeature<span style=color:#f92672>&gt;</span> END_WATER_PLACED_FEATURE <span style=color:#f92672>=</span> RegistryKey.<span style=color:#a6e22e>of</span>(RegistryKeys.<span style=color:#a6e22e>PLACED_FEATURE</span>, <span style=color:#66d9ef>new</span> Identifier(<span style=color:#e6db74>&#34;awesome&#34;</span>, <span style=color:#e6db74>&#34;end_water&#34;</span>));
</span></span></code></pre></div><p>并且在<code>BiomeModifications</code>中注册<code>END_WATER_PLACED_FEATURE</code>。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>BiomeModifications.<span style=color:#a6e22e>addFeature</span>(BiomeSelectors.<span style=color:#a6e22e>foundInOverworld</span>(), GenerationStep.<span style=color:#a6e22e>Feature</span>.<span style=color:#a6e22e>FLUID_SPRINGS</span>, END_WATER_PLACED_FEATURE);
</span></span></code></pre></div><p><img src=/assets/fabric2024/11-1.png alt=11-1></p></div><div class="d-flex justify-content-between"><a class=text-reset href=https://blog.enaium.cn/post/2024-1-14-minecraft-fabric%E6%A8%A1%E7%BB%84%E5%BC%80%E5%8F%91%E6%95%99%E7%A8%8B%2310-%E6%B7%BB%E5%8A%A0%E7%9F%BF%E7%89%A9/>Minecraft Fabric模组开发教程#10 添加矿物</a>
<a class=text-reset href=https://blog.enaium.cn/post/2024-1-23-fabric%E6%A8%A1%E7%BB%84%E5%BC%80%E5%8F%91%E4%B8%AD4%E4%B8%AA%E7%83%AD%E9%87%8D%E8%BD%BD%E7%9A%84%E6%96%B9%E6%B3%95/>Fabric模组开发中4个热重载的方法</a></div></div></div></div></div><footer class="p-5 bg-dark text-white text-center"><div class=container><p class=lead>Copyright &copy; 2024 Enaium</p></div></footer><script src=/js/bootstrap.bundle.min.js></script></body></html>