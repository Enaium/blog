<!doctype html><html><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>1小时学会SpringBoot3+Vue3前后端分离开发</title>
<link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/styles.css></head><body class="d-flex flex-column justify-content-between min-vh-100"><nav class="navbar navbar-expand-lg bg-light"><div class=container-fluid><a class=navbar-brand href=/><img src=/assets/github.svg alt=Logo width=30 height=24 class="d-inline-block align-text-top">
Enaium的博客
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link aria-current=page href=https://blog.enaium.cn/contact/>联系</a></li><li class=nav-item><a class=nav-link aria-current=page href=https://blog.enaium.cn/about/>关于</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" data-bs-toggle=dropdown href=# role=button aria-expanded=false><img alt=Logo width=30 height=24 src=/assets/language.svg></a><ul class=dropdown-menu></ul></li></ul></div></div></nav><div style=flex:1><div class=container><div class=card><div class=card-header>1小时学会SpringBoot3+Vue3前后端分离开发</div><div class=card-body><div class=card-text><h2 id=引言>引言</h2><p>大家可能刚学会<code>Java</code>和<code>Vue</code>之后都会想下一步是什么？那么就先把<code>SpringBoot</code>和<code>Vue</code>结合起来，做一个前后端分离的项目吧。</p><h2 id=准备工作>准备工作</h2><p>首先你需要懂得<code>Java</code>和<code>Vue</code>的基础知识，环境这里就不多说了，直接开始。</p><h2 id=创建-springboot-项目>创建 SpringBoot 项目</h2><p>使用<code>IDEA</code>旗舰版的可以直接使用自带<code>Spring Initializr</code>创建项目，其他的可以使用<a href=https://start.spring.io/>Spring Initializr</a>创建项目。</p><p>语言选择<code>Java</code>，类型选择<code>Gradle-Kotlin</code>，<code>Java</code>选择 21，其他的都随便填。</p><p><img src=https://s2.loli.net/2024/04/23/OCrh1epGw5UDq24.png alt=20240423215241></p><p><img src=https://s2.loli.net/2024/04/23/4nLkO3TgEdtpFsa.png alt=20240423210415></p><p>接下来选择依赖，这里选择<code>web</code>，<code>lombok</code>,数据库选择<code>PostgreSQL</code>，如果你使用的是<code>MySQL</code>就选它</p><p><img src=https://s2.loli.net/2024/04/23/4GF2vzm5CtlaJT8.png alt=20240423210635></p><p><img src=https://s2.loli.net/2024/04/23/CDSJkhpmK52yEgv.png alt=20240423210727></p><p>之后点击创建自动打开项目，或者点击生成打开下载的项目</p><p><img src=https://s2.loli.net/2024/04/23/6Y2qCyk8OGbhrc1.png alt=20240423210848>
<img src=https://s2.loli.net/2024/04/23/Y54rbSCx8QUAycW.png alt=20240423210903></p><p>之后等待项目的依赖下载完成就好了</p><p>如果需要配置镜像那就在<code>repositories</code>中最上面添加腾讯云的镜像</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span>repositories {
</span></span><span style=display:flex><span>    maven {
</span></span><span style=display:flex><span>        url = uri(<span style=color:#e6db74>&#34;https://mirrors.cloud.tencent.com/nexus/repository/maven-public&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    mavenCentral()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>首先我们需要创建数据库，比如一个图书管理系统，需要有一张图书表，有一些字段，比如标题、作者、创建时间、等等。</p><p>我们使用数据库管理工具来创建一个表吧。</p><p><img src=https://s2.loli.net/2024/04/23/pz61HG9EyuQLWUl.png alt=20240423225934></p><p>注意这里使用的是<code>Postgres</code>，如果是<code>MySQL</code>类型略有不同。</p><p>之后我们就可以创建实体类了，这里需要先引入<code>ORM</code>框架依赖，这里我为了方便引入写了一个<code>Gradle</code>插件，把它写入到<code>plugins</code>中，接着在刷新一下项目就可以继续编写代码了。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span>plugins {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 省略其他插件...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    id(<span style=color:#e6db74>&#34;cn.enaium.jimmer.gradle&#34;</span>) version <span style=color:#e6db74>&#34;0.0.11&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>我们创建一个接口<code>Book</code>添加一个<code>Entity</code>和<code>Table</code>注解，之后添加一些方法，名称就是根据数据库中字段名称一样，只不过要把蛇形命名改为小驼峰。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Entity</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Table</span>(name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;book&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Book</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Id</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@GeneratedValue</span>(strategy <span style=color:#f92672>=</span> GenerationType.<span style=color:#a6e22e>IDENTITY</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>id</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    String <span style=color:#a6e22e>title</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    String <span style=color:#a6e22e>author</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    LocalDateTime <span style=color:#a6e22e>createTime</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>写完之后，我们按下编译的快捷键(默认是 Ctrl+F9)，之后就可以编写接口了。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@RestController</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@RequiredArgsConstructor</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookController</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> JSqlClient sql;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@GetMapping</span>(<span style=color:#e6db74>&#34;/book&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> List<span style=color:#f92672>&lt;</span>Book<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>getBooks</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> sql.<span style=color:#a6e22e>createQuery</span>(Tables.<span style=color:#a6e22e>BOOK_TABLE</span>).<span style=color:#a6e22e>select</span>(Tables.<span style=color:#a6e22e>BOOK_TABLE</span>).<span style=color:#a6e22e>execute</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@PostMapping</span>(<span style=color:#e6db74>&#34;/book&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>saveBook</span>(<span style=color:#a6e22e>@RequestBody</span> Book book) {
</span></span><span style=display:flex><span>        sql.<span style=color:#a6e22e>save</span>(book);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>使用<code>RequiredArgsConstructor</code>注解可以为被<code>final</code>修饰的字段生成构造方法，这样就不用手动写构造方法了。</p><p><code>getBooks</code>用于获取图书列表，首先使用<code>createQuery</code>创建一个查询，传入一张表，类似于<code>from book</code>，接着使用<code>select</code>选择所有字段，类似于<code>select id, name, author, createTime</code>，最后使用<code>execute</code>执行查询。
<code>saveBook</code>用于保存图书，使用<code>save</code>方法保存图书。</p><p>接下来需要配置允许跨域，这里使用<code>CORS</code>，在<code>SpringBoot</code>中配置<code>CORS</code>很简单，只需实现<code>WebMvcConfigurer</code>接口的<code>addCorsMappings</code>方法即可。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>WebMvcConfig</span> <span style=color:#66d9ef>implements</span> WebMvcConfigurer {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>addCorsMappings</span>(CorsRegistry registry) {
</span></span><span style=display:flex><span>        registry.<span style=color:#a6e22e>addMapping</span>(<span style=color:#e6db74>&#34;/**&#34;</span>)
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>allowedMethods</span>(<span style=color:#e6db74>&#34;*&#34;</span>)
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>allowedOrigins</span>(<span style=color:#e6db74>&#34;*&#34;</span>)
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>allowedHeaders</span>(<span style=color:#e6db74>&#34;*&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>最后我们配置一下数据库链接。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#a6e22e>spring.datasource.driver-class-name</span><span style=color:#f92672>=</span><span style=color:#e6db74>org.postgresql.Driver</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.datasource.url</span><span style=color:#f92672>=</span><span style=color:#e6db74>jdbc:postgresql://localhost:5432/postgres?currentSchema=sbv</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.datasource.username</span><span style=color:#f92672>=</span><span style=color:#e6db74>postgres</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>spring.datasource.password</span><span style=color:#f92672>=</span><span style=color:#e6db74>postgres</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>jimmer.dialect</span><span style=color:#f92672>=</span><span style=color:#e6db74>org.babyfish.jimmer.sql.dialect.PostgresDialect</span>
</span></span></code></pre></div><p>如果是<code>MySQL</code>就把<code>PostgresDialect</code>改为<code>MySqlDialect</code></p><p>这样我们的后端就写完了，接下来我们开始写前端。</p><h2 id=创建-vue-项目>创建 Vue 项目</h2><p>这里使用<code>pnpm create vue</code>来创建，如果没有安装<code>pnpm</code>可以使用<code>npm install -g pnpm</code>来安装。</p><p><img src=https://s2.loli.net/2024/04/23/5ojwLOBYrxkClK8.png alt=20240423215715></p><p>名称随便，之后使用<code>Typescript</code>和<code>Vue Router</code>剩下的选否。</p><p>之后使用命令<code>pnpm install</code>安装依赖，并删除<code>src</code>下的所有文件。</p><p>编写<code>App.vue</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ts&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>h1</span>&gt;<span style=color:#a6e22e>Vue</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>Vite</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>TypeScript</span>&lt;/<span style=color:#f92672>h1</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span></code></pre></div><p>编写<code>main.ts</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createApp</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>; <span style=color:#66d9ef>import</span> <span style=color:#a6e22e>App</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;./App.vue&#34;</span>; <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>app</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createApp</span>(<span style=color:#a6e22e>App</span>); <span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>mount</span>(<span style=color:#e6db74>&#34;#app&#34;</span>);
</span></span></code></pre></div><p>这里我使用<code>naive ui</code>，使用命令安装<code>pnpm add -D naive-ui</code>，之后使用自动导入配置。</p><p>安装这两个插件<code>pnpm add -D unplugin-auto-import unplugin-vue-components</code></p><p>之后修改<code>vite.config.ts</code>文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>fileURLToPath</span>, <span style=color:#a6e22e>URL</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;node:url&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>defineConfig</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;vite&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>vue</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;@vitejs/plugin-vue&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>AutoImport</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;unplugin-auto-import/vite&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Components</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;unplugin-vue-components/vite&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>NaiveUiResolver</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;unplugin-vue-components/resolvers&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// https://vitejs.dev/config/
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>defineConfig</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vue</span>(),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>AutoImport</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>imports</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;vue&#34;</span>,
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;naive-ui&#34;</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#34;useDialog&#34;</span>, <span style=color:#e6db74>&#34;useMessage&#34;</span>, <span style=color:#e6db74>&#34;useNotification&#34;</span>, <span style=color:#e6db74>&#34;useLoadingBar&#34;</span>]
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      ]
</span></span><span style=display:flex><span>    }),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Components</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>resolvers</span><span style=color:#f92672>:</span> [<span style=color:#a6e22e>NaiveUiResolver</span>()]
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>resolve</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>alias</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;@&#34;</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>fileURLToPath</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>URL</span>(<span style=color:#e6db74>&#34;./src&#34;</span>, <span style=color:#66d9ef>import</span>.<span style=color:#a6e22e>meta</span>.<span style=color:#a6e22e>url</span>))
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p>然后就可以继续编写页面了，首先在<code>views</code>中编写两个页面一个用来获取所有的图书，一个用来添加图书。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ts&#34;</span>&gt;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>type</span> { <span style=color:#a6e22e>DataTableColumns</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;naive-ui&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Book</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>id</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>author</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createTime</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>columns</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>DataTableColumns</span>&lt;<span style=color:#f92672>Book</span>&gt; <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;ID&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;id&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Title&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;title&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Author&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;author&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;Create Time&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>key</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;createTime&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>books</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>&lt;<span style=color:#f92672>Book</span><span style=color:#960050;background-color:#1e0010>[]</span>&gt;([])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>fetch</span>(<span style=color:#e6db74>&#34;http://localhost:8080/book&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>response</span>) =&gt; <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>json</span>())
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>data</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Book</span>[]) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>books</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>data</span>
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>n-data-table</span> <span style=color:#f92672>:columns</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;columns&#34;</span> <span style=color:#f92672>:data</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;books&#34;</span> /&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ts&#34;</span>&gt;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ref</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;vue&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useMessage</span>, <span style=color:#a6e22e>type</span> <span style=color:#a6e22e>FormInst</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;naive-ui&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>BookInput</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>title</span><span style=color:#f92672>?:</span> <span style=color:#a6e22e>string</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>author</span><span style=color:#f92672>?:</span> <span style=color:#a6e22e>string</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>message</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useMessage</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>formRef</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>&lt;<span style=color:#f92672>FormInst</span> <span style=color:#960050;background-color:#1e0010>|</span> <span style=color:#a6e22e>null</span>&gt;(<span style=color:#66d9ef>null</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>bookInput</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>ref</span>&lt;<span style=color:#f92672>BookInput</span>&gt;({})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>save</span> <span style=color:#f92672>=</span> () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>formRef</span>.<span style=color:#a6e22e>value</span><span style=color:#f92672>?</span>.<span style=color:#a6e22e>validate</span>().<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>valid</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>valid</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>fetch</span>(<span style=color:#e6db74>&#34;http://localhost:8080/book&#34;</span>, {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>method</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;POST&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>headers</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>          <span style=color:#e6db74>&#34;Content-Type&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;application/json&#34;</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>body</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>bookInput</span>.<span style=color:#a6e22e>value</span>)
</span></span><span style=display:flex><span>      }).<span style=color:#a6e22e>then</span>(() =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>message</span>.<span style=color:#a6e22e>success</span>(<span style=color:#e6db74>&#34;Book saved&#34;</span>)
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>n-form</span> <span style=color:#a6e22e>ref</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;formRef&#34;</span> <span style=color:#f92672>:model</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;bookInput&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>n-form-item</span> <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Title&#34;</span> <span style=color:#a6e22e>path</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;title&#34;</span> <span style=color:#f92672>:</span><span style=color:#a6e22e>rule</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;[{ required: true, message: &#39;Please input title&#39; }]&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>n-input</span> <span style=color:#a6e22e>v</span><span style=color:#f92672>-model:value</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;bookInput.title&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>n-form-item</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>n-form-item</span> <span style=color:#a6e22e>label</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Author&#34;</span> <span style=color:#a6e22e>path</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;author&#34;</span> <span style=color:#f92672>:</span><span style=color:#a6e22e>rule</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;[{ required: true, message: &#39;Please input author&#39; }]&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>n-input</span> <span style=color:#a6e22e>v</span><span style=color:#f92672>-model:value</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;bookInput.author&#34;</span> /&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>n-form-item</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>n-button</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;primary&#34;</span> <span style=color:#f92672>@click</span><span style=color:#e6db74>=&#34;save&#34;</span>&gt;<span style=color:#a6e22e>Save</span><span style=color:#960050;background-color:#1e0010>&lt;/</span><span style=color:#a6e22e>n</span><span style=color:#f92672>-button</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>n-form</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span></code></pre></div><p>之后编写布局，在<code>layouts</code>下编写一个，<code>BookLayout.vue</code>，我们使用左侧一栏来选择页面，右侧来展示页面。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>setup</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ts&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>n-layout</span> <span style=color:#a6e22e>has</span><span style=color:#f92672>-sider</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>n-layout-sider</span> <span style=color:#a6e22e>content</span><span style=color:#f92672>-style</span><span style=color:#960050;background-color:#1e0010>=&#34;</span><span style=color:#a6e22e>padding</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>24px</span><span style=color:#960050;background-color:#1e0010>;&#34;</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>ul</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>RouterLink</span> <span style=color:#a6e22e>to</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/book&#34;</span>&gt;<span style=color:#a6e22e>Book</span>&lt;/<span style=color:#f92672>RouterLink</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span>          &lt;<span style=color:#f92672>RouterLink</span> <span style=color:#a6e22e>to</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/book/create&#34;</span>&gt;<span style=color:#a6e22e>Create</span> <span style=color:#a6e22e>Book</span>&lt;/<span style=color:#f92672>RouterLink</span>&gt;
</span></span><span style=display:flex><span>        &lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>ul</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>n-layout-sider</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>n-layout</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>n-layout-content</span> <span style=color:#a6e22e>content</span><span style=color:#f92672>-style</span><span style=color:#960050;background-color:#1e0010>=&#34;</span><span style=color:#a6e22e>padding</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>24px</span><span style=color:#960050;background-color:#1e0010>;&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>RouterView</span> /&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>n-layout-content</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>n-layout</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>n-layout</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span></code></pre></div><p>之后创建一个<code>router</code>目录，编写<code>index.ts</code>文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>BookLayout</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;@/layouts/BookLayout.vue&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Books</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;@/views/Books.vue&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>SaveBook</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;@/views/SaveBook.vue&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createRouter</span>, <span style=color:#a6e22e>createWebHistory</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;vue-router&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>router</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createRouter</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>history</span>: <span style=color:#66d9ef>createWebHistory</span>(),
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>routes</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;/book&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>component</span>: <span style=color:#66d9ef>BookLayout</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>children</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;&#34;</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>component</span>: <span style=color:#66d9ef>Books</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;create&#34;</span>,
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>component</span>: <span style=color:#66d9ef>SaveBook</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      ]
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>router</span>
</span></span></code></pre></div><p>之后在<code>main.ts</code>中引入<code>router</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>router</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./router&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 省略其他代码...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>use</span>(<span style=color:#a6e22e>router</span>)
</span></span></code></pre></div><p>最后在<code>App.vue</code>中使用<code>RouterView</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vue data-lang=vue><span style=display:flex><span>&lt;<span style=color:#f92672>template</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>NMessageProvider</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>RouterView</span> /&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>NMessageProvider</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>template</span>&gt;
</span></span></code></pre></div><p>这样我们的前端就写完了，接下来我们启动项目。</p></div><div class="d-flex justify-content-between"><a class=text-reset href=https://blog.enaium.cn/post/2024-4-13-%E4%BD%BF%E7%94%A8kotlin%E8%BF%9B%E8%A1%8C%E5%85%A8%E6%A0%88%E5%BC%80%E5%8F%91-ktor-kotlin-js/>使用Kotlin进行全栈开发 Ktor+Kotlin/JS</a>
<a class=text-reset href=https://blog.enaium.cn/post/2024-6-8-%E4%BD%BF%E7%94%A8kotlin%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AAhttp%E6%9C%8D%E5%8A%A1%E5%99%A8/>使用Kotlin编写一个Http服务器</a></div></div></div></div></div><footer class="p-5 bg-dark text-white text-center"><div class=container><p class=lead>Copyright &copy; 2024 Enaium</p></div></footer><script src=/js/bootstrap.bundle.min.js></script></body></html>